<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The world of actors – growth</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">The world of actors</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The world of actors</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">The world of actors</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Data story</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./full_network.html" class="sidebar-item-text sidebar-link">Full actor network characteristics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./belgian.html" class="sidebar-item-text sidebar-link">The belgian actor subnetwork</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./growth.html" class="sidebar-item-text sidebar-link active">Analysis of network growth</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./homophily.html" class="sidebar-item-text sidebar-link">Homophily and attributes analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./centrality_and_success.html" class="sidebar-item-text sidebar-link">Centrality in actor graph and popularity. Are they linked?</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about.html" class="sidebar-item-text sidebar-link">About</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#analysis-of-network-growth" id="toc-analysis-of-network-growth" class="nav-link active" data-scroll-target="#analysis-of-network-growth">Analysis of network growth</a>
  <ul class="collapse">
  <li><a href="#a-qualitative-analysis-based-on-degree-evolution" id="toc-a-qualitative-analysis-based-on-degree-evolution" class="nav-link" data-scroll-target="#a-qualitative-analysis-based-on-degree-evolution">A qualitative analysis based on degree evolution</a></li>
  <li><a href="#computing-the-preferential-attachment-exponent" id="toc-computing-the-preferential-attachment-exponent" class="nav-link" data-scroll-target="#computing-the-preferential-attachment-exponent">Computing the preferential attachment exponent</a>
  <ul class="collapse">
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a></li>
  <li><a href="#numerical-results" id="toc-numerical-results" class="nav-link" data-scroll-target="#numerical-results">Numerical results</a></li>
  <li><a href="#comparing-the-model-to-observed-results" id="toc-comparing-the-model-to-observed-results" class="nav-link" data-scroll-target="#comparing-the-model-to-observed-results">Comparing the model to observed results</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">



<section id="analysis-of-network-growth" class="level1 page-columns page-full">
<h1>Analysis of network growth</h1>
<p>In this section we try to understand how the network grows, more precisely how edges are formed and where new actors connect to. For this, we timestamp each edge of the actor graph with the corresponding movie release date. In this operation, about 0.75% of the original edges are dropped.</p>
<section id="a-qualitative-analysis-based-on-degree-evolution" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="a-qualitative-analysis-based-on-degree-evolution">A qualitative analysis based on degree evolution</h2>
<p>In the Barabási-Albert model <span class="citation" data-cites="barabasi_2016">(<a href="#ref-barabasi_2016" role="doc-biblioref">Barabási and Pósfai 2016</a>)</span>, the preferential attachment factor <span class="math inline">\(\Pi(k_i)\)</span> describes the probability with which a new node connects to an already existing node of degree <span class="math inline">\(k_i\)</span>. Therefore, the rate at which node <span class="math inline">\(i\)</span>’s degree grows is proportional to <span class="math inline">\(\Pi(k_i)\)</span>.</p>
<p><span class="math display">\[
\frac{\mathrm d k_i}{\mathrm d t} \propto \Pi(k_i)
\]</span></p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In reality the proportionality constant depends on <span class="math inline">\(t\)</span>, and in the large <span class="math inline">\(t\)</span> limit we get <span class="citation" data-cites="barabasi_2016">(<a href="#ref-barabasi_2016" role="doc-biblioref">Barabási and Pósfai 2016</a>)</span></p>
<p><span class="math display">\[
\frac{\mathrm d k_i}{k_i} = \frac 12 \frac{\mathrm dt}{t}
\]</span></p>
<p>Integrating and letting <span class="math inline">\(k_i^0\)</span> be the degree with which node <span class="math inline">\(i\)</span> first joined the network at time <span class="math inline">\(t_i^0\)</span>, we get :</p>
<p><span class="math display">\[
k_i(t) = k_i^0 \left( \frac{t}{t_i^0} \right)^\beta
\]</span></p>
<p>Where the dynamical exponent <span class="math inline">\(\beta = 1/2\)</span> describes the degree growth speed.</p>
<p>In the subsequent analysis of degree evolution, we neglect these subtleties in order to give a first impression. We later do a more formal analysis based on <span class="citation" data-cites="jeong_2003">(<a href="#ref-jeong_2003" role="doc-biblioref">Jeong, Néda, and Barabási 2003</a>)</span>.</p>
</div>
</div>
<p>In a naive numerical approach, we inspect whether there could be preferential attachment by computing the year-to-year degree evolution of each node in the network. <a href="#fig-degev">Figure&nbsp;1</a> gives us a first impression of the results, where we see the actors (individual lines) grow through time, until their growth becomes stagnant due to their end of career. We notice that actors who enter late in the graph tend to grow faster !</p>
<div class="cell" data-execution_count="30">
<div class="cell-output cell-output-display">
<div id="fig-degev" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-degev-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Actor degree as a function of time. Each line models one actor. This figure shows only a random sample of 256 actors to give a general impression and to avoid cluttering the plot.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-deltadeg">Figure&nbsp;2</a>, we plot a 2D histogram of the degree evolution <span class="math inline">\(\Delta k_i\)</span> versus the original degree <span class="math inline">\(k_i\)</span>. Darker colours correspond to a higher density of samples. If there were no preferential attachement, that is <span class="math inline">\(\Pi = \textrm{constant}\)</span>, we would expect that <span class="math inline">\(\Delta k_i\)</span> be intependant of <span class="math inline">\(k_i\)</span>. However, the general trend of this figure shows that the higher the original degree <span class="math inline">\(k_i(t)\)</span>, the more the degree grows to <span class="math inline">\(k_i(t+1) = k_i(t) + \Delta k_i(t)\)</span>, which shows that this network exhibits preferential attachment. And in accordance with <a href="#fig-degev">Figure&nbsp;1</a>, we see that this preferential attachment is stronger when actors join the graph later.</p>
<div class="cell page-columns page-full" data-execution_count="42">
<div class="cell-output cell-output-display column-screen-inset">
<div id="fig-deltadeg" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-deltadeg-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Preliminary evidence of preferential attachment through degree evolution. This figure shows degree evolution <span class="math inline">\(\Delta k_i\)</span> as a function of degree <span class="math inline">\(k_i\)</span>, binned every decade starting 1911.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="computing-the-preferential-attachment-exponent" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="computing-the-preferential-attachment-exponent">Computing the preferential attachment exponent</h2>
<section id="methodology" class="level3">
<h3 class="anchored" data-anchor-id="methodology">Methodology</h3>
<p>In order to formalize the results of the previous section, we compute the preferential attachment factor based on the methods explained in <span class="citation" data-cites="jeong_2003">(<a href="#ref-jeong_2003" role="doc-biblioref">Jeong, Néda, and Barabási 2003</a>)</span>.</p>
<p>For the following, we consider adding edges to the graph progressively. If the edge adds a new actor to the network (“external edge”), we record the degree of the actors it attaches to. Note that we therefore do not report the degrees between two existing actors (“internal edges”), but we still add them progressively.</p>
<p>We want to estimate :</p>
<p><span class="math display">\[\Pi(k_i) = \frac{k_i}{\sum_j k_j} \approx \frac{\text{number of new connections to node } i}{\text{total number of new connections}}\]</span></p>
<p>Numerically, we perform this by histogramming. Therefore, the algorithm is as follows :</p>
<ol type="1">
<li>Since we need an already existing population in order to estimate preferential attachment, we consider the initial graph at time <span class="math inline">\(t_0 = 1920\)</span>.</li>
<li>Bin edges together based on their date.</li>
<li>For each bin <span class="math inline">\((t_-, t_+)\)</span>, repeat :
<ol type="1">
<li>Record the degree histogram <span class="math inline">\(p(k)\)</span> at the start <span class="math inline">\(t_-\)</span> of each bin.</li>
<li>Add the edges in the bin, and record the degree histogram <span class="math inline">\(q(k)\)</span> of the actors that new actors connect to.</li>
<li>The probability distribution <span class="math inline">\(\Pi(k)\)</span> is obtained by dividing <span class="math inline">\(q(k)\)</span> by <span class="math inline">\(p(k)\)</span>, and renormalizing. The denominator accounts for the fact that high degrees are more rare. If we didn’t perform this division, then we would observe little preferential attachment, as new actors connect to many low degree actors just due to the sheer number of them.</li>
</ol></li>
</ol>
<p>We perform binning using two methods, and plot the bin sizes in <a href="#fig-bin">Figure&nbsp;3</a>. Binning edges together every decade gives us more control over the date at which we perform the estimation, but yields very uneven bin sizes. Binning edges together every 9th quantile (but rounding at integer years) yields more even bin sizes, but the dates are non-uniformly distributed.</p>
<div class="cell" data-execution_count="88">
<div class="cell-output cell-output-display">
<div id="fig-bin" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-bin-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Sample sizes for the two edge binning methods</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="numerical-results" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="numerical-results">Numerical results</h3>
<p>The Barabási-Albert model can be extended to other regimes of preferential attachment. <span class="citation" data-cites="jeong_2003">(<a href="#ref-jeong_2003" role="doc-biblioref">Jeong, Néda, and Barabási 2003</a>)</span> defines the scaling exponent <span class="math inline">\(\alpha\)</span> as :</p>
<p><span class="math display">\[
\Pi(k) \sim k^\alpha
\]</span></p>
<p>If <span class="math inline">\(\alpha = 1\)</span>, we recover the original Barabási-Albert model (linear preferential attachment). Regimes <span class="math inline">\(\alpha &lt; 1\)</span> are said to be sub-linear, and <span class="math inline">\(\alpha &gt; 1\)</span> is super-linear. Larger values of <span class="math inline">\(\alpha\)</span> therefore correspond to a stronger preferential attachment, and one can intuitively expect the appearance of giant hubs.</p>
<p>Performing the computations, we scatter the results for <span class="math inline">\(\Pi(k)\)</span> in <a href="#fig-pacum">Figure&nbsp;4</a>. While it is clear that preferential attachment follows a power law, there is a lot of noise in the data. To address this, the paper suggests to use the cumulative function :</p>
<p><span class="math display">\[
\kappa(k) = \int^k \Pi(k') \; \mathrm d k' \sim k^{\alpha+1}
\]</span></p>
<div id="fig-pacum" class="cell column-screen-inset quarto-layout-panel" data-execution_count="98">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-pacum-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-pacum-output-1.png" class="img-fluid figure-img" data-ref-parent="fig-pacum"></p>
<p></p><figcaption class="figure-caption">(a) Binning every decade</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-pacum-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-pacum-output-2.png" class="img-fluid figure-img" data-ref-parent="fig-pacum"></p>
<p></p><figcaption class="figure-caption">(b) Binning every 9th quantile</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4: Preferential attachment <span class="math inline">\(\Pi(k)\)</span> and cumulative function <span class="math inline">\(\kappa(k)\)</span> for the two binning methods.</figcaption><p></p>
</figure>
</div>
<p>Performing the fit, we report the obtained scaling exponents and their 95% confidence interval in <a href="#fig-alphaev">Figure&nbsp;5</a>. Using the quantile bins, we can also compute an “average exponent” to be around <span class="math inline">\(\alpha \approx 0.5\)</span>, putting this network in the sublinear regime. Both binning methods show that the exponent tends to increase with time, confirming the observation that actors grow faster as they enter later into the graph.</p>
<div class="cell" data-execution_count="105">
<div class="cell-output cell-output-display">
<div id="fig-alphaev" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-alphaev-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;5: Evolution of scaling exponent <span class="math inline">\(\alpha\)</span>.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comparing-the-model-to-observed-results" class="level3">
<h3 class="anchored" data-anchor-id="comparing-the-model-to-observed-results">Comparing the model to observed results</h3>
<p>We now ask whether this model is able to predict the observed degree distribution. In the sub-linear regime, the probability distribution follows a stretched exponential distribution :</p>
<p><span class="math display">\[
p(k) \sim k^{-\alpha} \exp \left(\frac{-2 k^{1-\alpha}}{\langle k \rangle (1-\alpha)} \right)
\]</span></p>
<p><a href="#fig-compare">Figure&nbsp;6</a> compares the predicted and true distributions. Unfortunately, the match is poor : what happened ? When we computed the preferential attachment, recall we ignored internal edges, however they make up about 32% of the total edges, and are therefore not neglectible.</p>
<p>Therefore, we predict that the true exponent must actually be greater than one, putting the model in the super-linear regime. This is further supported by <a href="#fig-kmax">Figure&nbsp;7</a>, in which we see that the largest degree grows roughly linearly, <span class="math inline">\(k_{\text{max}} \sim t\)</span>, as one would find on the super-linear regime <span class="citation" data-cites="barabasi_2016">(<a href="#ref-barabasi_2016" role="doc-biblioref">Barabási and Pósfai 2016</a>)</span>.</p>
<div class="cell" data-execution_count="108">
<div class="cell-output cell-output-display">
<div id="fig-compare" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-compare-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;6: Comparing the true degree distribution to the one predicted by the Barabási-Albert model.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-execution_count="128">
<div class="cell-output cell-output-display">
<div id="fig-kmax" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="growth_files/figure-html/fig-kmax-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;7: Evolution of the maximum actor network degree</figcaption><p></p>
</figure>
</div>
</div>
</div>



</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-barabasi_2016" class="csl-entry" role="doc-biblioentry">
Barabási, Albert-László, and Márton Pósfai. 2016. <em>Network Science</em>. Cambridge University Press. <a href="https://books.google.ch/books?id=iLtGDQAAQBAJ">https://books.google.ch/books?id=iLtGDQAAQBAJ</a>.
</div>
<div id="ref-jeong_2003" class="csl-entry" role="doc-biblioentry">
Jeong, H., Z. Néda, and A. L. Barabási. 2003. <span>“Measuring Preferential Attachment in Evolving Networks.”</span> <em>Europhysics Letters</em> 61 (4): 567. <a href="https://doi.org/10.1209/epl/i2003-00166-9">https://doi.org/10.1209/epl/i2003-00166-9</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>